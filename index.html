<!doctype html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Escape Room: Happy Pandi</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="bg"></div>

    <header class="topbar">
        <div class="brand">
            <div class="logo">ğŸ—ï¸</div>
            <div class="brand-text">
                <div class="brand-title">Escape Room: Happy Pandi</div>
                <div class="brand-subtitle">Explora, usa objetos y resuelve misterios</div>
            </div>
        </div>

        <div class="actions">
            <button class="btn" id="btnAyuda">ğŸ§  Reglas</button>
            <button class="btn" id="btnGuardar">ğŸ’¾ Guardar</button>
            <button class="btn" id="btnReiniciar">ğŸ§¹ Reiniciar</button>
        </div>
    </header>

    <main class="app">
        <section class="card">
            <div class="sceneHeader">
                <div>
                    <h1 class="h1" id="roomName">Sala</h1>
                    <div class="muted" id="roomSubtitle"></div>
                </div>
                <div class="chips">
                    <span class="chip" id="chipRoom">ğŸ  Sala</span>
                    <span class="chip" id="chipGoal">ğŸ¯ Objetivo</span>
                </div>
            </div>

            <div class="roomArt">
                <div class="roomTitle" id="roomTitle">...</div>
                <p class="roomDesc" id="roomDesc">...</p>
                <div class="badges">
                    <span class="badge" id="badgeCast">ğŸ‘§ğŸ§’ Personajes: ...</span>
                    <span class="badge" id="badgeMood">âœ¨ Tono: ...</span>
                </div>
            </div>

            <div class="hintLine">
                <span class="hintEmoji">ğŸ’¡</span>
                <span class="muted">
                    <b>Paso 1:</b> Toca objetos para mirar. <b>Paso 2:</b> Si tienes un objeto en la mochila, tÃ³calo para agarrarlo. <b>Paso 3:</b> Con el objeto agarrado, Ãºsalo donde quieras.
                </span>
            </div>

            <div class="objects" id="objectsGrid"></div>

            <div class="puzzleBox" id="puzzleBox" style="display:none;">
                <div class="puzzleTitle">ğŸ”’ Panel</div>
                <div class="muted" id="puzzleHint"></div>
                <div class="puzzleRow">
                    <input type="text" id="puzzleInput" placeholder="Escribe aquÃ­..." autocomplete="off">
                    <button class="btn btn-orange" id="btnProbar">Probar</button>
                    <button class="hintBtn" id="btnPuzzleHint">ğŸ’¡ Pista</button>
                </div>
                <div class="muted small" id="puzzleExtra"></div>
            </div>

            <div class="navRow">
                <button class="btn btn-primary btn-big" id="btnSiguiente" style="display:none;">â¡ï¸ Siguiente sala</button>
                <button class="hintBtn" id="btnRoomHint">ğŸ’¡ Necesito ayuda</button>
            </div>
        </section>

        <aside class="card">
            <div class="sectionHead">
                <h2 class="h2">ğŸ’ Mi Mochila</h2>
                <span class="badge" id="invCount">0 objetos</span>
            </div>

            <div class="activeItemBar" id="activeItemBar">
                <div class="activeItemLeft">
                    <div class="activeItemEmoji" id="activeItemEmoji">ğŸ‘‹</div>
                    <div class="activeItemInfo">
                        <span class="activePill">ğŸ–ï¸ En mi mano</span>
                        <span class="activeItemName" id="activeItemText">Nada</span>
                    </div>
                </div>
                <button class="btn btn-mini" id="btnClearActive">Soltar</button>
            </div>

            <div class="inventory" id="inventory"></div>

            <div class="spacer"></div>

            <div class="sectionHead">
                <h2 class="h2">ğŸ§© Pistas</h2>
                <span class="badge" id="clueCount">0 pistas</span>
            </div>
            <ol class="clues" id="clues"></ol>

            <div class="spacer"></div>

            <div class="sectionHead">
                <h2 class="h2">ğŸšª Progreso</h2>
            </div>
            <div class="muted" id="progressText">...</div>
            <div class="progressBar">
                <div class="progressFill" id="progressFill" style="width: 0%"></div>
            </div>
        </aside>
    </main>

    <dialog id="modalAyuda">
        <div class="modalCard">
            <div class="modalHead">
                <h3 class="h3">ğŸ§  Â¿CÃ³mo jugar?</h3>
                <button class="btn btn-mini" id="btnCerrarAyuda">âœ–ï¸</button>
            </div>
            <div class="modalBody">
                <p style="font-size: 1.1rem; line-height: 1.7;">
                    <b>1ï¸âƒ£ MIRA:</b> Toca los objetos de la sala para mirarlos.<br><br>
                    <b>2ï¸âƒ£ AGARRA:</b> Cuando encuentres algo, aparecerÃ¡ en tu mochila. TÃ³calo para agarrarlo.<br><br>
                    <b>3ï¸âƒ£ USA:</b> Con algo en tu mano, tÃ³calo donde quieras usarlo.<br><br>
                    <b>ğŸ’¡ Ayuda:</b> Si te atascas, usa el botÃ³n "ğŸ’¡ Necesito ayuda"
                </p>
            </div>
            <div class="modalActions">
                <button class="btn btn-primary btn-big" id="btnEntendido">Â¡Entendido!</button>
            </div>
        </div>
    </dialog>

    <dialog id="modalMsg">
        <div class="modalCard">
            <div class="modalHead">
                <h3 class="h3" id="modalTitle">Mensaje</h3>
                <button class="btn btn-mini" id="btnCerrarMsg">âœ–ï¸</button>
            </div>
            <div class="modalBody" id="modalBody"></div>
            <div class="modalActions">
                <button class="btn btn-primary" id="btnOkMsg">OK</button>
            </div>
        </div>
    </dialog>

    <div class="toast" id="toast"></div>

    <script src="./app.js"></script>
</body>
</html>