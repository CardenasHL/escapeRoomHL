{
    "version": "1.0",
    "rooms": [{
            "id": "room_1",
            "name": "Parque del Tesoro",
            "subtitle": "Un robo... dentro de un juego ğŸ¤«",
            "cast": "Alex, Lola, Pili",
            "mood": "Aventura y risas",
            "goal": "Abrir la caja del tesoro",
            "desc": "La Happy Pandi juega a una bÃºsqueda del tesoro. El mapa ha sido 'robado' (de mentira) para hacer el reto final mÃ¡s emocionante. Encuentra el mapa y abre la caja.",
            "items": [
                { "id": "star", "name": "Pegatina estrella", "icon": "â­", "value": 100 },
                { "id": "clip", "name": "Clip metÃ¡lico", "icon": "ğŸ§·", "value": 10 },
                { "id": "map", "name": "Mapa del tesoro", "icon": "ğŸ—ºï¸", "value": 204 }
            ],
            "objects": [{
                    "id": "banco",
                    "name": "Banco del parque",
                    "icon": "ğŸª‘",
                    "hint": "Algo se ve debajoâ€¦",
                    "interactions": [{
                        "when": { "type": "inspect" },
                        "actions": [
                            { "type": "addClueOnce", "key": "r1_c1", "text": "Bajo el banco hay una nota: â€œLa caseta guarda lo importante. Pero la caja solo se abre con nÃºmeros secretos.â€" },
                            { "type": "addItemOnce", "key": "r1_star", "itemId": "star" }
                        ]
                    }]
                },
                {
                    "id": "piedras",
                    "name": "Piedrecitas brillantes",
                    "icon": "ğŸª¨",
                    "hint": "Hay algo metÃ¡licoâ€¦",
                    "interactions": [{
                        "when": { "type": "inspect" },
                        "actions": [
                            { "type": "addClueOnce", "key": "r1_c2", "text": "Encuentras un papelito: â€œğŸ§· vale 10. (Sirve para abrir cierres pequeÃ±os)â€" },
                            { "type": "addItemOnce", "key": "r1_clip", "itemId": "clip" }
                        ]
                    }]
                },
                {
                    "id": "mochila",
                    "name": "Mochila del juego",
                    "icon": "ğŸ’",
                    "hint": "La cremallera parece atascada",
                    "interactions": [{
                            "when": { "type": "inspect" },
                            "actions": [
                                { "type": "showMsg", "title": "Mochila cerrada", "html": "La cremallera estÃ¡ atascada. <b>Pili</b>: â€œNecesitamos algo fino para abrirlaâ€¦â€" }
                            ]
                        },
                        {
                            "when": { "type": "useItem", "itemId": "clip" },
                            "actions": [
                                { "type": "addClueOnce", "key": "r1_c3", "text": "Dentro hay otra nota: â€œâ­ vale 100. Y el mapa vale 204.â€" },
                                { "type": "addItemOnce", "key": "r1_map", "itemId": "map" },
                                { "type": "showMsg", "title": "Â¡Se abriÃ³!", "html": "El clip encaja perfecto y la cremallera se abre. Â¡Encuentras el mapa!" }
                            ]
                        }
                    ]
                },
                {
                    "id": "caseta",
                    "name": "Caseta de juegos",
                    "icon": "ğŸ ",
                    "hint": "Hay una caja con panel",
                    "interactions": [{
                            "when": { "type": "inspect" },
                            "actions": [
                                { "type": "showMsg", "title": "Caja cerrada", "html": "La caja tiene un panel numÃ©rico. <b>Pili</b>: â€œParece una suma secretaâ€¦â€" }
                            ]
                        },
                        {
                            "when": { "type": "useItem", "itemId": "map" },
                            "actions": [{
                                "type": "openPuzzle",
                                "puzzle": {
                                    "type": "sum",
                                    "prompt": "Escribe el cÃ³digo. Pista: â­ + ğŸ§· + ğŸ—ºï¸",
                                    "sumItemIds": ["star", "clip", "map"],
                                    "successTitle": "Â¡Caja abierta! ğŸ‰",
                                    "successText": "Â¡Lo lograste! Dentro hay pegatinas del tesoro y una nota. <b>Lola</b>: â€œYo escondÃ­ el mapa para que el juego durara mÃ¡sâ€¦ y se me fue la cabeza.â€",
                                    "onSuccess": { "type": "completeRoom" }
                                }
                            }]
                        }
                    ]
                }
            ]
        },

        {
            "id": "room_2",
            "name": "Biblioteca del Libro Misterioso",
            "subtitle": "Un crimenâ€¦ Â¡en un libro! (ficticio) ğŸ“š",
            "cast": "Victoria, Michael, Pili",
            "mood": "Misterio literario",
            "goal": "Recuperar la Ãºltima pÃ¡gina",
            "desc": "Leen un libro de misterio (inventado). Falta la Ãºltima pÃ¡gina y sin ella no se puede saber el final. Alguien la escondiÃ³ para hacer un reto: resolver antes de leer.",
            "items": [
                { "id": "clip2", "name": "Clip (otra vez)", "icon": "ğŸ§·", "value": 0 },
                { "id": "page", "name": "Ãšltima pÃ¡gina", "icon": "ğŸ“„", "value": 0 },
                { "id": "keycard", "name": "Tarjeta de salida", "icon": "ğŸªª", "value": 0 }
            ],
            "objects": [{
                    "id": "estanteria",
                    "name": "EstanterÃ­a",
                    "icon": "ğŸ“š",
                    "hint": "Un hueco raro entre libros",
                    "interactions": [{
                        "when": { "type": "inspect" },
                        "actions": [
                            { "type": "addClueOnce", "key": "r2_c1", "text": "Una nota dice: â€œSi quieres abrir un cierre pequeÃ±oâ€¦ un clip te salva.â€" },
                            { "type": "addItemOnce", "key": "r2_clip", "itemId": "clip2" }
                        ]
                    }]
                },
                {
                    "id": "mesa",
                    "name": "Mesa de lectura",
                    "icon": "ğŸ“",
                    "hint": "Hay un dibujo de un cajÃ³n",
                    "interactions": [{
                        "when": { "type": "inspect" },
                        "actions": [
                            { "type": "addClueOnce", "key": "r2_c2", "text": "En un papel: â€œLa Ãºltima pÃ¡gina estÃ¡ guardada donde se devuelven los libros.â€" }
                        ]
                    }]
                },
                {
                    "id": "mostrador",
                    "name": "Mostrador",
                    "icon": "ğŸ§¾",
                    "hint": "CajÃ³n con cierre pequeÃ±o",
                    "interactions": [{
                            "when": { "type": "inspect" },
                            "actions": [
                                { "type": "showMsg", "title": "CajÃ³n cerrado", "html": "El cierre es pequeÃ±o. <b>Pili</b>: â€œEsto pide un clipâ€¦â€" }
                            ]
                        },
                        {
                            "when": { "type": "useItem", "itemId": "clip2" },
                            "actions": [
                                { "type": "addItemOnce", "key": "r2_page", "itemId": "page" },
                                { "type": "showMsg", "title": "Â¡Encontrada!", "html": "<b>Michael</b>: â€œLa escondÃ­ para que jugÃ¡ramos a adivinar el finalâ€¦ Â¡pero me pasÃ©!â€" },
                                { "type": "addClueOnce", "key": "r2_c3", "text": "La pÃ¡gina tiene una pista extra: â€œSi tienes el finalâ€¦ pide la tarjeta a Pili.â€" }
                            ]
                        }
                    ]
                },
                {
                    "id": "pili",
                    "name": "Pili",
                    "icon": "ğŸ¤–",
                    "hint": "Te ayuda si le das la pÃ¡gina",
                    "interactions": [{
                            "when": { "type": "inspect" },
                            "actions": [
                                { "type": "showMsg", "title": "Pili dice:", "html": "â€œSi consigues la Ãºltima pÃ¡gina, puedo darte la tarjeta de salida.â€" }
                            ]
                        },
                        {
                            "when": { "type": "useItem", "itemId": "page" },
                            "actions": [
                                { "type": "addItemOnce", "key": "r2_keycard", "itemId": "keycard" },
                                { "type": "showMsg", "title": "Tarjeta conseguida", "html": "Pili analiza la pÃ¡gina y te entrega una tarjeta de salida. â€œBuen trabajo, detective.â€" }
                            ]
                        }
                    ]
                },
                {
                    "id": "puerta",
                    "name": "Puerta de salida",
                    "icon": "ğŸšª",
                    "hint": "Necesita tarjeta",
                    "interactions": [{
                            "when": { "type": "inspect" },
                            "actions": [
                                { "type": "showMsg", "title": "Cerrada", "html": "Hay un lector de tarjeta. Necesitas una tarjeta de salida." }
                            ]
                        },
                        {
                            "when": { "type": "useItem", "itemId": "keycard" },
                            "actions": [
                                { "type": "completeRoom" },
                                { "type": "showMsg", "title": "Â¡Sala superada! ğŸ‰", "html": "La puerta se abre. <b>Victoria</b>: â€œÂ¡Siguiente sala!â€" }
                            ]
                        }
                    ]
                }
            ]
        },

        {
            "id": "room_3",
            "name": "Laboratorio: El Panel de Colores",
            "subtitle": "Ciencia + puzzle final ğŸ”¬",
            "cast": "Ana, Tao, Pili",
            "mood": "Ciencia divertida",
            "goal": "Abrir la puerta final",
            "desc": "En el laboratorio hay un panel con colores. Alguien lo cambiÃ³ para crear un reto. Encuentra la tarjeta y activa el orden correcto.",
            "items": [
                { "id": "card", "name": "Tarjeta de acceso", "icon": "ğŸªª", "value": 0 }
            ],
            "objects": [{
                    "id": "caja",
                    "name": "Caja de herramientas",
                    "icon": "ğŸ§°",
                    "hint": "Algo brilla dentro",
                    "interactions": [{
                        "when": { "type": "inspect" },
                        "actions": [
                            { "type": "addClueOnce", "key": "r3_c1", "text": "Nota: â€œOrden correcto: AZUL â†’ AMARILLO â†’ ROSA (AAR)â€" },
                            { "type": "addItemOnce", "key": "r3_card", "itemId": "card" }
                        ]
                    }]
                },
                {
                    "id": "panel",
                    "name": "Panel de colores",
                    "icon": "ğŸ›ï¸",
                    "hint": "Necesita tarjeta + cÃ³digo",
                    "interactions": [{
                            "when": { "type": "inspect" },
                            "actions": [
                                { "type": "showMsg", "title": "Panel", "html": "Hay un lector de tarjeta y un teclado. <b>Pili</b>: â€œTarjeta primeroâ€¦ luego el orden.â€" }
                            ]
                        },
                        {
                            "when": { "type": "useItem", "itemId": "card" },
                            "actions": [{
                                "type": "openPuzzle",
                                "puzzle": {
                                    "type": "answer",
                                    "prompt": "Escribe el orden como letras (AAR). Pista: AZUL â†’ AMARILLO â†’ ROSA",
                                    "answer": "AAR",
                                    "successTitle": "Â¡Puerta final abierta! ğŸ¥³",
                                    "successText": "Â¡Escapaste! <b>Pili</b>: â€œInforme final: cerebro brillante detectado.â€",
                                    "onSuccess": { "type": "completeRoom" }
                                }
                            }]
                        }
                    ]
                },
                {
                    "id": "pili3",
                    "name": "Pili",
                    "icon": "ğŸ¤–",
                    "hint": "Te resume el objetivo",
                    "interactions": [{
                        "when": { "type": "inspect" },
                        "actions": [
                            { "type": "showMsg", "title": "Pili dice:", "html": "Objetivo: consigue una tarjeta en la caja y Ãºsala en el panel." }
                        ]
                    }]
                }
            ]
        }
    ]
}